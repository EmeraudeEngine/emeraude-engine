# Bugs and TODO-list

- GENERAL
    - Remove all invalid noexcept keyword. (WIP)
    - Increase inlining. (WIP)
    - Improve functions args to use "std::move" when useful.
    - Rewrite libs Observer/Observable pattern with the idea of static and shared objects.
    - Replace all "std::stringstream" by "std::format" (C++20) for simple keys, names or identifiers creation. WARNING: This doesn't work under macOS for targeting older SDKs.
    - Check for light coherence, create a built-in scene with a fixed directional light and multiple materials.
    - Issue on Linux with X11, multi-monitors and NVIDIA proprietary driver. More info: https://forums.developer.nvidia.com/t/external-monitor-freezes-when-using-dedicated-gpu/265406

- RENDERING SYSTEM
    - Enable additional render targets next to the main one to create shadow maps, 2D textures and reflections. (WIP)
    - Study and create the cubemap rendering (single-pass) to be able to produce reflections and shadow cubemap.
    - Improve the rendering branches to reduce cost.
    - Check sprite blending.
    - Check sprite texture clamping to edges.
    - Re-enable the screenshot from the engine.

- AUDIO SYSTEM
    - Check to stop sound from an inactive scene. (Shared with SCENE section)

- PHYSICS SYSTEM
    - Enable the rotational physics. (WIP)
    - Create a particle system using Compute Shader.

- RESOURCES SYSTEM
    - Merge Font from PixelFactory and FontResource.
    - Check the direct data description with the JSON resource description.
    - Check the store resource addition from the JSON resource description. (WIP)

- OVERLAY SYSTEM
    - Rework ComposedSurface from overlay to create a native menu.
    - Rewrite the TextWriter class.

- SCENE SYSTEM
    - Create a shared dynamic uniform buffer for static entities instead of using push_constants as they normally won't move between frames. Thus, it will only hold the model matrix.
    - Check enable/disable audio on scene switching. (Shared with the AUDIO section)

- ANIMATION SYSTEM
    - (Prior) Check all animatable properties for all objects.
    - Remove Variant for "std::any"

- CONSOLE SYSTEM
    - Bring back a useful console behavior.

- LIGHTING AND SHADOWING
    - Fix the ambient light update against the render target which uses it.
    - Re-enable the ambient light color generated by the averaging active light color.
    - Check the ambient light color generated by a texture.
    - Check what the light matrix for a shadow map is and how to update it. Hint, this is an MVP matrix from the light point of view.
    - Check light radius against entities to discard some useless rendering.
    - Shadow maps: Create a re-usable shadow map for ephemere lights.

- SHADERS CODE AND GENERATION
    - Check source and binary caches.
    - Prepare a way to use manual GLSL sources.
    - Re-enable normal calculation bypass when the surface is not facing a light.
    - Re-enable shadow maps. Depends on the offscreen rendering completion, but most of the code is done. (WIP)

- MATERIAL
    - Create a shared dynamic uniform buffer when a material does not use sampler. EDIT: Pay attention to the real benefit of that solution.
    - Create a material editor in JavaScript (application side). EDIT: Should be a tool for the engine.

- TEXTURING
    - Finish 1D and 3D textures.

- LIBRARIES AND EXTERNAL DEPENDENCIES
    - Determine a native 3D format for loading speedup.
    - Finish 3D formats loading/reading.

- VULKAN SPECIFIC
    - Find a better way to detect the UBO max capacity. For now the limit is hard-coded to 65,536 bytes.
    - Implement descriptorIndexing from Vulkan 1.2 API.
    - Implement VK_KHR_synchronization2 and VK_KHR_dynamic_rendering from Vulkan 1.3 API.
    - Check validation layers and debug messenger relationship. (According to khronos, this is valid to create the debug messenger without validation layers)
    - Fix texture loading. (UINT â†’ UNORM) Convert data before? or not?
    - Use of a separated image from a sampler in GLSL when useful.
    - Find a better solution to handle shared uniform buffer objects.
    - Find a better way to create and store a descriptor set layout.
    - Find a way to order the rendering by pipeline layout to reduce the binding cost per draw. See VK_KHR_dynamic_rendering from Vulkan 1.1 API extension, upgraded in Vulkan 1.2 API and core in Vulkan 1.3 API.
    - Check for the right way to push constant from the right shader declaration to the right stage in vulkan. (GraphicsShaderGenerator.cpp:254)
    - Analyze UBO and instanced VBO usage and make a better and global shared UBO/VBO optimization for short life entity.